var currentHeightChange;function openTxt(id){if(event.type=='load'){var needsLoad=1;}else{id=event.currentTarget.getAttribute('data-id');}
var button=document.querySelector(`connect.text.${CSS.escape(id)}`);if(allTxtData[id])var content=allTxtData[id];else var content=JSON.parse(button.querySelector('.txt_data').textContent);var container=document.querySelector('.prof_container');var expcon=document.querySelector('biome.expanded_content');var expconInside=expcon.querySelector('scroll');var mainCard=document.querySelector('biome.main_user_info');var expHeader=document.querySelector('biome.expanded_content .exp_header');var start=limitHeight(mainCard.offsetHeight);expcon.style.height=start;mainCard.style.height=start;expconInside.innerHTML='';var copy=0;if(content.length==1){copy=1;}
for(i=0;i<content.length;i++){var text=content[i];var element;if(text[0]=='title'){element=document.createElement('h1');element.classList.add('exp_el');element.innerHTML=text[1];element.classList.add('title');expconInside.appendChild(element);}else if(text[0]=='body'){element=document.createElement('h3');element.classList.add('exp_el');var copyEl=document.createElement('span');copyEl.classList.add('copy_content');copyEl.innerHTML=text[1];element.appendChild(copyEl);element.classList.add('body');expconInside.appendChild(element);if(copy==1){element.addEventListener('click',copyText,false);element.classList.add('copy');var copyIcon=document.createElement('div');copyIcon.classList.add('dvcn-copy');element.appendChild(copyIcon);var msg=document.createElement('h3');msg.textContent='Copied!';msg.classList.add('copied_msg');element.appendChild(msg);}}else if(text[0]=='image'){element=document.createElement('div');element.classList.add('exp_el');element.classList.add('image');element.style.paddingTop=`${text[2]*100}%`;var img=document.createElement('img');img.setAttribute('src',`https://hydr.in/includes/img.inc.php?id=${text[1]}`);element.appendChild(img);expconInside.appendChild(element);}else if(text[0]=='link'){var url=text[1];if(!url.includes('https://')&&!url.includes('http://')){url=`http://${url}`;}
if(isValidHttpUrl(url)){element=document.createElement('a');element.classList.add('exp_el');element.classList.add('link');element.setAttribute('href',url);element.setAttribute('target','_blank');var elId=makeCode(5);element.setAttribute('data-id',elId);var h3=document.createElement('h3');h3.innerHTML=`<div class='dvcn-link'></div>${encode(text[2])}`;element.appendChild(h3);expconInside.appendChild(element);linkPlatform(url,elId);}}}
expHeader.querySelector('h3').textContent=button.querySelector('.non_marquee').textContent;var end=limitHeight(expconInside.scrollHeight+expHeader.offsetHeight);mainCard.style.height=end;expcon.style.height=`${end}px`;currentHeightChange=end;var path=window.location.pathname;path=path.split('/');history.pushState(id,{},`${path[1]}/${id}`);click(id);if(needsLoad){container.classList.add('expand');mainCard.style.height='';setTimeout(function(){if(!document.querySelector('span[data-name="hydrin_bg_holder"]'))pageEnter();},200)}else{setTimeout(function(){container.classList.add('expand');setTimeout(function(){mainCard.style.height='';scrollBarHeights();},300)},200)}}
function checkExpHeight(){var expcon=document.querySelector('biome.expanded_content');var expconInside=expcon.querySelector('scroll');var expHeader=document.querySelector('biome.expanded_content .exp_header');var end=limitHeight(expconInside.scrollHeight+expHeader.offsetHeight);expcon.style.height=`${end}px`;}
function clickLink(event){var ct=event.currentTarget,id=ct.getAttribute('data-id');click(id);}
function makeCode(length){var result='';var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var charactersLength=characters.length;for(var i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength));}
return result;}
function pageEnter(){var la=document.querySelector('.loading_area');la.classList.remove('active');}
window.addEventListener('keydown',checkShortcut,false);function linkPlatform(url,id){var formData=new FormData();formData.append('url',url);ajaxRun=$.ajax({type:"POST",url:"includes/assignlinkajax.inc.php",data:formData,contentType:false,processData:false,success:function(result){if(result=='error=noturl'){var platform='error=noturl';}else{result=JSON.parse(result);var platform=result[0];var linkEl=document.querySelector('.expanded_content a.link[data-id="'+id+'"]');var icon=linkEl.querySelector('h3 div');icon.removeAttribute('class');icon.classList.add(`dvcn-${platform}`);}}})}
function checkShortcut(event){var container=document.querySelector('.prof_container');if(event.keyCode===27&&container.classList.contains('expand')){exitExp();}else if(event.keyCode===13&&container.classList.contains('expand')){exitExp();}}
function exitExp(){var container=document.querySelector('.prof_container');var expcon=document.querySelector('biome.expanded_content');var expconInside=expcon.querySelector('scroll');var mainCard=document.querySelector('biome.main_user_info');var expHeader=document.querySelector('biome.expanded_content .exp_header');var start=limitHeight(expconInside.offsetHeight+expHeader.offsetHeight);expcon.style.height=start;mainCard.style.height=start;var end=limitHeight(mainCard.querySelector('scroll').offsetHeight);expcon.style.height=end;mainCard.style.height=end;var path=window.location.pathname;path=path.split('/');history.pushState('home',{},path[1]);setTimeout(function(){container.classList.remove('expand');setTimeout(function(){mainCard.style.height='';expcon.style.height='';},300)},200)}
function limitHeight(num){var maxHeight=window.innerHeight-30;if(num>maxHeight){return maxHeight;}else{return num;}}
function click(id){var formData=new FormData;formData.append('id',id);$.ajax({type:"POST",url:"includes/click.inc.php",data:formData,contentType:false,processData:false,success:function(result){}})}
function closeSquarePanels(event){var panels=document.querySelectorAll('.square_panel');var buttons=document.querySelectorAll('.square_opener');var ct=event.target;var timeout=0;for(var i=0;i<buttons.length;i++){if(buttons[i].contains(ct)&&buttons[i].classList.contains('active')){return;}}
for(var i=0;i<panels.length;i++){if(panels[i].contains(ct)){timeout=300;}}
setTimeout(function(){for(var i=0;i<buttons.length;i++){buttons[i].classList.remove('active');}
for(var i=0;i<panels.length;i++){panels[i].classList.remove('active');}},timeout)}
var squarePanelListener;function openSquarePanel(event){var button=event.currentTarget;var panelName=button.getAttribute('data-open');var panel=document.querySelector(`.square_panel.${panelName}`);if(button.classList.contains('active')){panel.classList.remove('active');button.classList.remove('active');}else{setTimeout(function(){button.classList.add('active');panel.classList.add('active');},10)}}
var allTxtData={};function getTxtData(){var formData=new FormData;var userCode=document.querySelector('.prof_container').getAttribute('data-id');formData.append('u',userCode);if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/pan/consdata.feed.php",data:formData,contentType:false,processData:false,success:function(result){var connectionData=JSON.parse(result);allTxtData={};for(var i=0;i<connectionData.length;i++){var data=connectionData[i];allTxtData[data['id']]=JSON.parse(data['content']);}}})}