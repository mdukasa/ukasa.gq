document.addEventListener('mousemove',mCoords,false);document.addEventListener('mouseup',readyReorder,false);document.addEventListener('touchstart',mCoords,false);document.addEventListener('touchmove',mCoords,false);document.addEventListener('touchend',readyReorder,false);var m,mX=0,mY=0,tooltipReady=0,reorderBar,reCont;function mCoords(event){if(reorderReady==1||tooltipReady==1){if(event.type=='touchstart'||event.type=='touchmove'){m=event.touches[0]||event.changedTouches[0];mX=m.pageX;mY=m.pageY;}else if(event.type=='mousemove'){m=window.event;mXPrev=mX;mYPrev=mY;mX=m.clientX;mY=m.clientY;}
if(reorderReady==1){reorderCons();}else if(tooltipReady==1){if(!tooltipTimer){if(desktopTooltipNew==0){var tooltip=document.querySelector('.tooltip');tooltip.style.left=mX;tooltip.style.top=mY;}
moveTooltip();}}}}
var pfpSrc='';function openEdit(event){var container=document.querySelector('.prof_container');var mainCard=document.querySelector('.main_user_info');var themeCards=document.querySelector('.theme_info');var connectCard=document.querySelector('.connect_info');var editButton=document.querySelector('button[name="edit_card_button"]');var ct=event.currentTarget;if(container.classList.contains('edit')){editButton.classList.remove('active');$.keyframe.define([{name:'overflow_main','0%':{'transform':`translateY(20px)`},'40%':{'transform':'translateY(-10px)'},'70%':{'transform':'translateY(5px)'},'90%':{'transform':'translateY(-2px)'},'100%':{'transform':'translateY(0)'}},{name:'close_edit_top','0%':{'transform':`translateY(0)`},'100%':{'transform':'translateY(30px)'}},{name:'close_edit_bottom','0%':{'transform':`translateY(0)`},'100%':{'transform':'translateY(-30px)'}}]);$('.theme_info').playKeyframe({name:'close_edit_top',duration:'0.2s',timingFunction:'cubic-bezier(0.52, -0.01, 1, 0.4)'});$('.connect_info').playKeyframe({name:'close_edit_bottom',duration:'0.2s',timingFunction:'cubic-bezier(0.52, -0.01, 1, 0.4)'});setTimeout(function(){container.classList.remove('edit');container.classList.remove('finish');ct.classList.remove('active');$('.main_user_info').playKeyframe({name:'overflow_main',duration:'0.4s',timingFunction:'cubic-bezier(0, 0.67, 0.24, 0.97)'});},200)}else{if(pfpSrc!=container.getAttribute('data-pfpurl')){editMenuPfp();}
editButton.classList.add('active');var bioCard=document.querySelector('.bio_info');var liCon=document.querySelector('.liquid_elements');var connectContent=mainCard.querySelector('.connections').innerHTML;if(connectContent)connectCard.querySelector('.connections').innerHTML=mainCard.querySelector('.connections').innerHTML;else{var emptyPanel=`<div class='empty_panel'>
				<img draggable='false' src='includes/img/bg_illustrations/no_connection.svg'/>
				<div class='content'>
					<h1>No conn<wbr>ect<wbr>ions ...yet</h1>
					<h3>Click here to add your first one</h3>
				</div>
			</div>`;connectCard.querySelector('.connections').innerHTML=emptyPanel;}
var mcBR=mainCard.getBoundingClientRect();var ccBR=connectCard.getBoundingClientRect();var ccDiff=mcBR.top-ccBR.top+(mcBR.height-ccBR.height);var bcBR=bioCard.getBoundingClientRect();var bcDiff=mcBR.top-bcBR.top;if(window.innerWidth<=720){var bcMobStyle=window.getComputedStyle(document.querySelector('biome.main_user_info .profile_info'));var bcMobOffset=parseInt(bcMobStyle.getPropertyValue('padding-top'));bcDiff=bcDiff+bcMobOffset;}
var tcBR=themeCards.getBoundingClientRect();var tcDiff=mcBR.top-tcBR.top;var ccLiq=liCon.querySelector('.cc_liq');var bcLiq=liCon.querySelector('.bc_liq');var tcLiq=liCon.querySelector('.tc_liq');var colRef=document.querySelector('.theme_info .color_change');var pfpRef=document.querySelector('.theme_info .pfp_change');var colLiq=tcLiq.querySelector('.color_change');var pfpLiq=tcLiq.querySelector('.pfp_change');bcLiq.style.height=bcBR.height;ccLiq.style.height=ccBR.height;ct.classList.add('active');if(connectCard.classList.contains('hide')){ccLiq.classList.add('hide')}else{ccLiq.classList.remove('hide')}
if(bioCard.classList.contains('hide')){bcLiq.classList.add('hide')}else{bcLiq.classList.remove('hide')}
if(colRef.classList.contains('hide')){colLiq.classList.add('hide')}else{colLiq.classList.remove('hide')}
if(pfpRef.classList.contains('hide')){pfpLiq.classList.add('hide')}else{pfpLiq.classList.remove('hide')}
$.keyframe.define([{name:'connect_card','0%':{'transform':`translateY(${ccDiff}px)`},'100%':{'height':'translateY(0px)'}},{name:'bio_card','0%':{'transform':`translateY(${bcDiff}px)`},'100%':{'height':'translateY(0px)'}},{name:'theme_card','0%':{'transform':`translateY(${tcDiff}px)`},'100%':{'height':'translateY(0px)'}}]);$('.connect_info').playKeyframe({name:'connect_card',duration:'0.5s',timingFunction:'cubic-bezier(0.09,-0.01, 0.14, 0.99)'});$('.bio_info').playKeyframe({name:'bio_card',duration:'0.5s',timingFunction:'cubic-bezier(0.09,-0.01, 0.14, 0.99)'});$('.cc_liq').playKeyframe({name:'connect_card',duration:'0.5s',timingFunction:'cubic-bezier(0.09,-0.01, 0.14, 0.99)'});$('.bc_liq').playKeyframe({name:'bio_card',duration:'0.5s',timingFunction:'cubic-bezier(0.09,-0.01, 0.14, 0.99)'});$('.theme_info').playKeyframe({name:'theme_card',duration:'0.5s',timingFunction:'cubic-bezier(0.09,-0.01, 0.14, 0.99)'});$('.tc_liq').playKeyframe({name:'theme_card',duration:'0.5s',timingFunction:'cubic-bezier(0.09,-0.01, 0.14, 0.99)'});setTimeout(function(){container.classList.add('edit');setTimeout(function(){container.classList.add('finish');clearAni=document.querySelectorAll('.card_setting');for(i=0;i<clearAni.length;i++){clearAni[i].style.animation='none';}
clearAni=document.querySelectorAll('.half_card_settings');for(i=0;i<clearAni.length;i++){clearAni[i].style.animation='';}},500)},20)}}
function editMenuPfp(){var container=document.querySelector('.prof_container');pfpSrc=container.getAttribute('data-pfpurl');var pfpCanvas=document.querySelector('.part.pfp canvas.profile_img');var pfpCtx=pfpCanvas.getContext('2d');var canPfp=new Image;pfpCanvas.width=200;pfpCanvas.height=200;canPfp.onload=function(){pfpCtx.drawImage(canPfp,0,0,200,200);};canPfp.src=pfpSrc;}
function editConnects(event){var ct=event.currentTarget;if(ct.classList.contains('done')){closeRight();resetCardSets();return;}
var right=document.querySelector('section.right');resetCardSets();ct.classList.add('loading');var formData=new FormData();formData.append('rrrr',rrrr);if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/pan/editcons.pan.php",data:formData,contentType:false,processData:false,success:function(result){if(result.includes('error=')&&result.length<50){errorAlerts(result);ct.classList.remove('loading');}else{var container=right.querySelector('span.content');container.innerHTML=result;openSection();editConsOn();ct.classList.add('done');reorderBar=document.querySelector('.reorder_indicator');}}});}
function deleteCon(event){var id=document.querySelector('.rounded_panel.con_main_info').getAttribute('data-id');var formData=new FormData;formData.append('id',id);formData.append('rrrr',rrrr);if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/deletecon.inc.php",data:formData,processData:false,contentType:false,success:function(result){if(result=='success'){resetCons();exitConExpand();}else{errorAlerts(result);}}})}
function refTile(fromCard,toCard,classAdd,offset){var content=fromCard.innerHTML;var refCard=document.querySelector('.ref_tile.card_setting');var fcBR=fromCard.getBoundingClientRect();var tcBR=toCard.getBoundingClientRect();toCard.innerHTML=content;refCard.innerHTML=content;fromCard.classList.add('hide');var offset=offset.offsetHeight;$.keyframe.define([{name:'move_ref_tile','0%':{'transform':`translate(${fcBR.left}px, ${fcBR.top}px)`},'100%':{'transform':`translate(${tcBR.left}px, ${tcBR.top-offset}px)`}}]);$('.ref_tile.card_setting').playKeyframe({name:'move_ref_tile',duration:'0.5s',timingFunction:'cubic-bezier(0.71,-0.01, 0.25, 1)'});refCard.classList.add(classAdd,'active');setTimeout(function(){refCard.classList.remove('active');toCard.classList.add('active');},500)}
var conScrollMove=0;function headerShadow(event){var ct=event.currentTarget;var head=ct.parentElement.parentElement.querySelector('.exp_header');if(ct.scrollTop>0){head.classList.add('shadow');}else{head.classList.remove('shadow');}
if(conScrollMove==0){conScrollMove=1;}}
var prepForReorder,reorderReady=0,itemToReorder;function readyReorder(event){var ct=event.currentTarget;if(event.type=='mousedown'&&event.which!=3||event.type=='touchstart'){reorderReady=2;conScrollMove=0;itemToReorder=ct;if(event.type=='mousedown'){var dur=200;}else{var dur=500;}
prepForReorder=setTimeout(function(){if(!itemToReorder.classList.contains('uploading')&&!itemToReorder.classList.contains('active')){if(conScrollMove==0&&reorderReady==2){reCont=itemToReorder.parentElement;reorderReady=1;if(reCont.classList.contains('connect_openers')){dragFollow.innerHTML=ct.innerHTML;}else if(reCont.classList.contains('add_text_layout')){if(itemToReorder.classList.contains('body')||itemToReorder.classList.contains('title')||itemToReorder.classList.contains('link')){var value=itemToReorder.querySelector('textarea').value;if(value==''){value='[Empty]';}
dragFollow.innerHTML=`<h3>${encode(value)}</h3>`;}else if(itemToReorder.classList.contains('image')){if(itemToReorder.classList.contains('file_here')){dragFollow.innerHTML='';var dragImg=document.createElement('canvas');var ogCanvas=itemToReorder.querySelector('canvas');var newHeight=(ogCanvas.offsetHeight/ogCanvas.offsetWidth)*700;dragImg.width=700;dragImg.height=newHeight;var diContext=dragImg.getContext('2d');diContext.drawImage(ogCanvas,0,0);dragFollow.appendChild(dragImg);}else{dragFollow.innerHTML='<h3>[Image]</h3>';}}}}}},dur)}else if(event.type=='mouseup'||event.type=='touchend'){if(reorderReady==2){if(conScrollMove==0){var parent=itemToReorder.parentElement;if(parent.classList.contains('connect_openers')){openCon(event);}else if(parent.classList.contains('add_text_layout')){if(parent.classList.contains('delete')){if(itemToReorder.classList.contains('image','file_here')&&!itemToReorder.classList.contains('uploading')&&!itemToReorder.classList.contains('pre_existing')){var id=itemToReorder.getAttribute('data-id');var idData=[id];deleteTxtImages(idData);}
setTimeout(function(){itemToReorder.remove();uniTxtCheck();},20);}else{if(itemToReorder.classList.contains('body')||itemToReorder.classList.contains('title')){itemToReorder.classList.add('active');itemToReorder.querySelector('textarea').focus();}else if(itemToReorder.classList.contains('link')){itemToReorder.classList.add('active');if(itemToReorder.querySelector('textarea.title')!==document.activeElement){itemToReorder.querySelector('textarea').focus();}}
uniTxtCheck();}}}}else if(reorderReady==1){clearInterval(scrollInt);scrollInt=null;dragFollow.classList.remove('active');var newPlace=document.querySelector('.place_here');if(newPlace!==null){reorderContents=itemToReorder.innerHTML;reorderId=itemToReorder.getAttribute('data-id');if(newPlace.classList.contains('bottom_place')){var newPlacement='afterend'}else{var newPlacement='beforebegin'}
if(reCont.classList.contains('connect_openers')){newPlace.insertAdjacentHTML(newPlacement,`<div class="connect_opener" data-id="${reorderId}">${reorderContents}</div>`);conReorderOn();}else if(reCont.classList.contains('add_text_layout')){reorderTxtEl(itemToReorder,newPlace,newPlacement);}
var mutes=document.querySelectorAll('.local_mute_indicator');for(i=0;i<mutes.length;i++){mutes[i].remove();}
itemToReorder.remove();if(reCont.classList.contains('connect_openers')){setConReorder();}
newPlace.classList.remove('place_here','bottom_place','top_place');reorderBar.classList.remove('active');document.querySelector('.muted_indicator').classList.remove('active');}
reCont.classList.remove('dragging');document.querySelector('section.right .content').classList.remove('show_arrows');}
reorderReady=0;clearTimeout(prepForReorder);}}
var dragFollow=document.querySelector('.drag_follow'),moveDir,scrollInt,newMute;function reorderCons(){if(reorderReady==1){if(!dragFollow.classList.contains('active')){dragFollow.classList.add('active');}
var muteInd=document.querySelector('.muted_indicator');if(!muteInd.classList.contains('active')){muteInd.classList.add('active');newMute=document.createElement('div');newMute.classList.add('local_mute_indicator');newMute.innerHTML=muteInd.innerHTML;itemToReorder.appendChild(newMute);}
var mainArea=document.querySelector('section.right .content');reContBR=reCont.getBoundingClientRect();if(reContBR.top<mY&&mY<(reContBR.top+reCont.offsetHeight)&&reContBR.left<mX&&mX<(reContBR.left+reCont.offsetWidth)){if(!reorderBar.classList.contains('active')){reorderBar.classList.add('active');reCont.classList.add('dragging');mainArea.classList.add('show_arrows');}}else{reorderBar.classList.remove('active');reCont.classList.remove('dragging');mainArea.classList.remove('show_arrows');}
dragFollow.style.top=`${mY-(dragFollow.offsetHeight/2)}px`;dragFollow.style.left=`${mX-(dragFollow.offsetWidth/2)}px`;var mover=document.querySelectorAll('.scrollpad');moveDir=0;for(i=0;i<2;i++){mover[i].classList.remove('active');var moBR=mover[i].getBoundingClientRect();if(moBR.top<mY&&mY<(moBR.top+mover[i].offsetHeight)&&moBR.left<mX&&mX<(moBR.left+mover[i].offsetWidth)){mover[i].classList.add('active');if(mover[i].classList.contains('up')){moveDir=1;}else{moveDir=2;}break;}}
if(moveDir==1||moveDir==2){if(!scrollInt){scrollInt=setInterval(function(){autoDragScroll();},100);}}else{clearInterval(scrollInt);scrollInt=null;var re=reCont.querySelectorAll('.reorder');for(i=0;i<re.length;i++){var reBR=re[i].getBoundingClientRect();var parent=re[i].parentElement;if(reBR.top<mY&&mY<(reBR.top+re[i].offsetHeight)&&reBR.left<mX&&mX<(reBR.left+re[i].offsetWidth)){if(re[i].classList.contains('bottom')){parent.classList.add('bottom_place','place_here');parent.classList.remove('top_place');reorderBar.style.top=`${reBR.top+re[i].offsetHeight-3}px`;i++;}else{parent.classList.add('top_place','place_here');parent.classList.remove('bottom_place');reorderBar.style.top=`${reBR.top-3}px`;}}else{parent.classList.remove('bottom_place','top_place','place_here');}}}}}
function autoDragScroll(){var par=document.querySelector('.add_text_layout.dragging');if(!par){par=document.querySelector('.connect_openers');}
var cont=par.closest('scroll');if(moveDir==1){newScroll=cont.scrollTop-20;}else{newScroll=cont.scrollTop+20;}
cont.scrollTop=newScroll;}
function closeEditor(sect){}
function openCon(event){var ct=event.target;transConsOpen(event);var conId=ct.getAttribute('data-id');var ctRect=ct.getBoundingClientRect();var expander=document.querySelector('section.right .expander');var expanderContent=expander.querySelector('scroll');expanderContent.classList.remove('add_connect');expanderContent.classList.add('edit_connect');var top=ctRect.top-3;var height=ct.offsetHeight+3;expanderContent.innerHTML='';expander.style.height=`${height}px`;expander.style.top=`${top}px`;expander.querySelector('h3.leg_title').innerHTML=ct.querySelector('h3').innerHTML;var exitButton=expander.querySelector('button[name="exit_edit_con"]');exitButton.removeEventListener('click',closeAddCon,false);exitButton.addEventListener('click',checkTextEdited,false);exitButton.setAttribute('data-pre-top',top);exitButton.setAttribute('data-pre-height',height);setTimeout(function(){expander.classList.add('active');expander.style.height=`calc(100% + 6px)`;expander.style.top=`-3px`;},20)
var loader=expander.querySelector('.expander_loader');loader.classList.add('loading');reorderReady=0;var formData=new FormData();formData.append('id',conId);formData.append('rrrr',rrrr);$.ajax({type:"POST",url:"includes/pan/editcon.pan.php",data:formData,contentType:false,processData:false,success:function(result){if(result.includes('error=')&&result.length<50){errorAlerts(result);checkTextEdited();}else{var right=document.querySelector('section.right');expanderContent.innerHTML=result;var conPresent=document.querySelector('.con_present');var infoEdit=document.querySelector('.con_main_info_edit');var color=document.querySelector('.con_main_info').getAttribute('data-color');loader.classList.remove('loading');conPresent.style.background=`#${color}`;infoEdit.style.background=luma(color,10);conPresent.querySelector('connect').style.background=`#${color}`;var editConn=document.querySelector('.edit_connect');editConn.classList.remove('white','black');editConn.classList.add(getContrast(color));var date=new Date();var tzOffset=getTzOffset();var currentDate=date;currentDate.setMinutes(currentDate.getMinutes()-tzOffset);currentDate=currentDate.toISOString().slice(0,10);var startInput=document.querySelector('input[name="analytics_start_date"]');startInput.value=currentDate;getAnalytics();editConOn(event);startInput.dispatchEvent(inputEvent);expander.classList.add('content_ready');setTimeout(function(){checkTooltips();},500)}}});}
var inputEvent=new Event('input',{bubbles:true,cancelable:true,});function addSectMenu(){var menu=document.querySelector('.action_bar .adds');if(menu.classList.contains('active')){menu.classList.remove('active');}else{menu.classList.add('active');}}
function transConsOpen(event){var ct=event.target;var rect=ct.getBoundingClientRect();}
function checkTextArea(event){if(event.keyCode==13){event.preventDefault();}
var ct=event.currentTarget;var mainInfo=document.querySelector('.con_main_info');var newVal=ct.value.replace(/\n*$/,"");ct.value=newVal;var needEdit=0;var inputs=mainInfo.querySelectorAll('textarea');for(i=0;i<inputs.length;i++){var tA=inputs[i];var domVal=tA.getAttribute('data-pre');var curVal=tA.value;if(domVal!=curVal){needEdit=1;break;}}
if(needEdit==1){mainInfo.classList.add('edit');}else{mainInfo.classList.remove('edit');}}
function undoConEdit(){document.querySelector('.con_main_info').classList.remove('edit');var edits=document.querySelectorAll('.con_main_info_edit textarea');for(i=0;i<edits.length;i++){var pre=edits[i].getAttribute('data-pre');edits[i].value=pre;}}
function changeCon(){var mainInfo=document.querySelector('.con_main_info');var titleEl=mainInfo.querySelector('textarea.title');var title=titleEl.value;var content=mainInfo.querySelector('textarea.url');var button=document.querySelector('[data-name="change_con_submit"]');var id=mainInfo.getAttribute('data-id');button.classList.add('prog');prog(button.querySelector('svg.prog'),99);var formData=new FormData();formData.append('title',title);formData.append('id',id);if(content){formData.append('content',content.value);}else{formData.append('content','text');}
formData.append('rrrr',rrrr);if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/editcon.inc.php",data:formData,contentType:false,processData:false,success:function(result){if(result.includes('error=')&&result.length<50){errorAlerts(result);button.classList.remove('prog');}else{prog(button.querySelector('svg.prog'),101);setTimeout(function(){document.querySelector('.con_main_info').classList.remove('edit');setTimeout(function(){button.classList.remove('prog');},200);},800)
var info=JSON.parse(result);var conPresent=document.querySelector('.con_present');var scroll=document.querySelector('.edit_connect');scroll.classList.remove('white','black');scroll.classList.add(getContrast(info[1]));conPresent.style.background=`#${info[1]}`;document.querySelector('.con_main_info_edit').style.background=luma(info[1],10);document.querySelector('.con_present connect').style.background=`#${info[1]}`;titleEl.setAttribute('data-pre',title);if(content){content.setAttribute('data-pre',content.value);}
var conPrev=document.querySelector('.edit_connect .con_present connect');conPrev.querySelector('.icon_holder div').className=`dvcn-${info[0]}`;title=encode(title);var marquee=`${title}&nbsp;&nbsp;&nbsp;${title}&nbsp;&nbsp;&nbsp;`;conPrev.querySelector('.non_marquee').innerHTML=title;conPrev.querySelector('.marquee').innerHTML=marquee;if(content){document.querySelector('[name="share_con_buttons"] [name="copy_con_link"] .copy_content').setAttribute('data-content',content.value);}
resetCons();}}})}
function resetEditCons(){var formData=new FormData;if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/pan/editcons.feed.php",data:formData,contentType:false,processData:false,success:function(result){document.querySelector('.edit_connects .connect_openers').innerHTML=result;setTimeout(function(){initialOn();editConsOn();},100)}})}
function resetCons(){var formData=new FormData;if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/pan/cons.feed.php",data:formData,contentType:false,processData:false,success:function(result){document.querySelector('.main_user_info .connections').innerHTML=result;var cs=document.querySelector('.card_setting.connect_info .connections');if(cs){cs.innerHTML=result;}
var edits=document.querySelector('section.right .expander.active');if(edits){resetEditCons();}else{setTimeout(function(){initialOn();},100)}}})}
function closeRight(restore){var split=document.querySelector('.split');split.classList.remove('active');if(restore)var el=document.querySelector('.card_setting.'+restore);if(el)el.classList.remove('loading','done');var right=document.querySelector('section.right');right.classList.remove('secondary');var fa=right.querySelector('.fa');if(fa){fa.classList.remove('fa');}}
function switchLevel(level){var right=document.querySelector('section.right');right.classList.remove('primary','secondary','tertiary');if(level=='primary'){}else if(level=='secondary'){right.classList.add('secondary');}else if(level=='tertiary'){right.classList.add('tertiary');}}
function checkTextEdited(){var edited=document.querySelector('.text_editor .action_bar');if(edited&&edited.classList.contains('ready')){sendAlert("You have unsaved changes. Are you sure you want to exit?","Delete changes","delete",closeTextEdited);}else{exitConExpand();}}
function closeTextEdited(){document.querySelector('.edit_text_submit').classList.remove('active');exitConExpand();}
function exitConExpand(){var expander=document.querySelector('section.right .expander');expander.classList.add('closing');expander.classList.remove('content_ready');var exitButton=expander.querySelector('button[name="exit_edit_con"]');var top=exitButton.getAttribute('data-pre-top');var height=exitButton.getAttribute('data-pre-height');expander.style.top=`${top}px`;expander.style.height=`${height}px`;expander.querySelector('.exp_header h3').textContent='Edit connection';setTimeout(function(){expander.classList.remove('active','closing');expander.style.height='';expander.style.top='';},500)}
var txtBackup;function localTextEditBackup(time){if(time=='immediate')var delay=0;else delay=500;setTimeout(function(){txtBackup=uniTxtCheck('export');},delay)}
function setConReorder(){var allCons=document.querySelector('.edit_connects .connect_openers').querySelectorAll('.connect_opener');var newList=[];for(var i=0;i<allCons.length;i++){var id=allCons[i].getAttribute('data-id');newList.push(id);}
parsedList=JSON.stringify(newList);var formData=new FormData;formData.append('list',parsedList);formData.append('rrrr',rrrr);if(ajaxRun){ajaxRun.abort();}
ajaxRun=$.ajax({type:"POST",url:"includes/reordercons.inc.php",data:formData,contentType:false,processData:false,success:function(result){if(result=='success'){resetCons();}else{errorAlerts(result);}}})}
tooltipTimer=null,mXChange=0,mYChange=0;function moveTooltip(){window.clearTimeout(tooltipTimer);var position=$(".tooltip svg").offset();var toolTipX=position.left;var toolTipY=position.top;var xCoeff=0.1*(mX-toolTipX);var yCoeff=0.1*(mY-toolTipY);$(".tooltip").animate({left:toolTipX+xCoeff+17.7,top:toolTipY+yCoeff+17},1,"linear");if(tooltipReady==1){mXChange=xCoeff;mYChange=yCoeff;tooltipTimer=setTimeout(function(){moveTooltip();},15)}else{tooltipTimer=null;}}
var desktopTooltipNew=0;function openTooltip(event){var tooltip=document.querySelector('.tooltip');if(!isTouchEnabled()&&event.type=='mouseover'||event.type=='touchstart'){tooltip.classList.add('active');var ttContent=tooltip.querySelector('.content');var eventData=event.currentTarget.querySelector('.tooltip_data');var eventContent=eventData.innerHTML;if(!eventContent){eventContent=eventData.getAttribute('tooltip');var reg=document.createElement('h3');reg.textContent=eventContent;ttContent.innerHTML='';ttContent.appendChild(reg);tooltip.classList.remove('more');}else{ttContent.innerHTML=eventContent;tooltip.classList.add('more');}
tooltipReady=1;}else if(event.type=='mouseout'||event.type=='touchend'){tooltip.classList.remove('active');tooltipReady=0;desktopTooltipNew=1;setTimeout(function(){desktopTooltipNew=0;},100)}}